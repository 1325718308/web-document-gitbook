{"version":3,"file":"vue.js","sources":["../../src/instance/proxy.js","../../src/instance/reactive.js","../../src/instance/array/observeArr.js","../../src/instance/array/config.js","../../src/instance/array/index.js","../../src/instance/Observer.js","../../src/instance/observe.js","../../src/instance/state.js","../../src/compiler/astParser.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/compiler/vdom/patch.js","../../src/compiler/lifecycle.js","../../src/instance/init.js","../../src/compiler/vDom/vnode.js","../../src/compiler/vDom/index.js","../../src/index.js"],"sourcesContent":["\nfunction proxyData(vm, target, key) {\n    Object.defineProperty(vm, key, {\n        get() {\n            return vm[target][key];\n        },\n        set(newVal) {\n            vm[target][key] = newVal;\n        }\n    })\n}\n\nexport default proxyData;","import observe from './observe';\n\nfunction defineReactiveData(data, key, value) {\n    observe(value);\n    Object.defineProperty(data, key, {\n        get() {\n            return value;\n        },\n        set(newValue) {\n            if (newValue === value) return;\n            observe(newVal);\n            value = newVal;\n        }\n    })\n}\n\nexport {\n    defineReactiveData\n}","import observe from '../observe';\nfunction observeArr(array) {\n    for (let i = 0; i < array.length; i++) {\n        observe(array[i]); \n    }\n}\nexport default observeArr;","var ARR_METHODS = [\n    'push',\n    'pop',\n    'splice',\n    'shift',\n    'unshift',\n    'sort',\n    'reverse'\n]\nexport {\n    ARR_METHODS\n}","import { ARR_METHODS } from './config';\nimport observeArr from './observeArr'\n\nvar originArrMethods = Array.prototype;\nvar arrMethods = Object.create(originArrMethods);\nARR_METHODS.map(function (m) {\n    arrMethods[m] = function () {\n        var args = Array.prototype.slice.call(arguments);\n        var rt = originArrMethods[m].apply(this, args);\n        var newArr;\n        switch(m) {\n            case 'push':\n            case 'unshift':\n                newArr = args;\n                break;\n            case 'splice':\n                newArr = args[2].slice(2);\n                break;\n            default: \n                break;\n        }\n\n        newArr && observeArr(newArr);\n        return rt;\n    }\n})\nexport {\n    arrMethods\n}\n","import { defineReactiveData} from './reactive';\nimport  observeArr  from './array/observeArr';\nimport  { arrMethods } from './array';\n\nfunction Observer(data) {\n    if (Array.isArray(data)) {\n        // 处理数组\n        data.__proto__ = arrMethods;\n        observeArr(data);\n    } else {\n        this.walk(data);\n    }\n}\n\nObserver.prototype.walk = function(data) {\n    var keys = Object.keys(data);\n    for(var i = 0; i < keys.length; i++) {\n        var key = keys[i];\n        var value = data[key];\n        defineReactiveData(data, key, value);\n    }\n}\n\nexport default Observer;\n","\nimport Observer from './Observer';\nfunction observe (data) {\n    if (typeof data !== 'object' || data === null) return;\n    return new Observer(data);\n}\n\nexport default observe;","import proxyData from './proxy';\nimport observe from './observe';\n\nfunction initState(vm) {\n    var options = vm.$options;\n    if (options.data) {\n        initData(vm);\n    }\n}\n\nfunction initData(vm) {\n    var data = vm.$options.data;\n    data = vm._data = typeof data === 'function' ? data.call(vm) : data || {};\n    for(let key in data) {\n        proxyData(vm, '_data', key);\n    }\n    observe(vm._data);\n}\n\nexport {\n    initState\n}","const attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\nconst unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z${unicodeRegExp.source}]*`\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\nconst startTagClose = /^\\s*(\\/?)>/\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\n\nfunction parseHtmlToAst(html) {\n    let root, \n        currentParent,\n        stack = [];\n    while(html) {\n        let text;\n        let textEnd = html.indexOf('<');\n        if (textEnd === 0) {\n            const startTagMatch = parseStartTag();\n            if (startTagMatch) {\n                start(startTagMatch.tagName, startTagMatch.attrs);\n                continue;\n            }\n            const endTagMatch = html.match(endTag);\n            if (endTagMatch) {\n                advance(endTagMatch[0].length);\n                end(endTagMatch[1]);\n                continue;\n            }\n        }\n        if (textEnd > 0) {\n            text = html.substring(0, textEnd);\n        }\n        if (text) {\n            advance(text.length);\n            chars(text);\n        }\n        break;\n    }\n    \n    function parseStartTag() {\n        const start = html.match(startTagOpen);\n        let end, attr;\n        if (start) {\n            const match = {\n                tagName: start[1],\n                attrs: []\n            }\n            advance(start[0].length);\n            while(!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n                match.attrs.push({\n                    name: attr[1],\n                    value: attr[3] || attr[4] || attr[5]\n                })\n                advance(attr[0].length);\n            }\n            if (end) {\n                advance(end[0].length);\n                return match;\n            }\n        }\n    }\n\n    function advance(n) {\n        html = html.substring(n)\n    }\n\n    function start(tagName, attrs) {\n        const element = createASTElement(tagName, attrs);\n        if (!root) {\n            root = element;\n        }\n        currentParent = element;\n        stack.push(element);\n    }\n    function end(tagName) {\n        const element = stack.pop();\n        currentParent = stack[stack.length - 1];\n        if (currentParent) {\n            element.parent = currentParent;\n            currentParent.children.push(element);\n        }\n    }\n    function chars(text) {\n        text = text.trim();\n        if (text.length > 0) {\n            currentParent.children.push({\n                type: 3,\n                text\n            })\n        }\n    }\n    function createASTElement(tagName, attrs) {\n        return {\n            tag: tagName,\n            type: 1,\n            children: [],\n            attrs,\n            parent\n        }\n    }\n    return root;\n}\nexport {\n    parseHtmlToAst\n}","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\nfunction formatProps(attrs) {\n   let attrStr = '';\n   for (let i = 0; i < attrs.length; i++) {\n       const attr = attrs[i];\n       if (attr.name === 'style') {\n           let styleAttrs = {}\n           attr.value.split(';').map(styleAttr => {\n               let [key, value] = styleAttr.split(':');\n               styleAttrs[key] = value;\n           })\n           attr.value = styleAttrs;\n       }\n       attrStr += `${attr.name}: ${JSON.stringify(attr.value)},`\n       return `{${attrStr.slice(0, -1)}}`\n   }\n}\n\nfunction getChildren(el) {\n    const children = el.children;\n    if (children) {\n        return children.map(c => generateChild(c)).join(',');\n    }\n}\n\nfunction generateChild(node) {\n    if (node.type === 1) {\n        return generate(node);\n    } else if(node.type === 3) {\n        let text = node.text;\n        if (!text.match(defaultTagRE)) {\n            // 纯文本的处理\n            return `_v(${JSON.stringify(text)})`\n        } \n        let match;\n        let index;\n        let lastIndex = defaultTagRE.lastIndex = 0;\n        let textArr = [];\n        while(match = defaultTagRE.exec(text)) {\n            index = match.index;\n            if (index > lastIndex) {\n                textArr.push(JSON.stringify(text.slice(lastIndex, index)));\n            }\n            textArr.push(`_s(${match[1].trim()})`);\n            lastIndex = index + match[0].length;\n        }\n        if (lastIndex < text.length) {\n            textArr.push(JSON.stringify(text.slice(lastIndex)));\n        }\n        return `_v(${textArr.join('+')})`\n    }\n}\n\nfunction generate(el) {\n    let children = getChildren(el);\n    let code = `_c('${el.tag}', ${\n            el.attrs.length > 0\n            ? \n            `${formatProps(el.attrs)}`\n            : undefined\n        })${\n            children ? `,${children}` : ''\n        }`;\n    return code;\n} \nexport {\n    generate\n}","import {parseHtmlToAst} from './astParser';\nimport { generate } from './generate';\nfunction compileToRenderFunction(html) {\n    const ast = parseHtmlToAst(html)\n    const code = generate(ast);\n    const render = new Function(`\n        with(this) {return ${code}}\n    `)\n    return render;\n}\n\nexport {\n    compileToRenderFunction\n}","\nfunction patch(oldNode, vNode) {\n    let el = createElement(vNode);\n    let parentElement = oldNode.parentNode;\n    parentElement.insertBefore(el, oldNode.nextSibling);\n    parentElement.removeChild(oldNode);\n}\nfunction createElement(vnode) {\n    const {tag, props, children, text} = vnode;\n    if (typeof tag === 'string') {\n        vnode.el = document.createElement(tag);\n        updateProps(vnode);\n        children.map(child => {\n            vnode.el.appendChild(createElement(child));\n        })\n    } else {\n        vnode.el = document.createTextNode(text);\n    }\n    return vnode.el;\n}\n\nfunction updateProps(vnode) {\n    const el = vnode.el;\n    const newProps = vnode.props || {};\n\n    for(let key in newProps) {\n        if (key === 'style') {\n            for(let sKey in newProps.style) {\n                el.style[sKey] = newProps.style[sKey];\n            }\n        } else if (key === 'class') {\n            el.className = el.class;\n        } else {\n            el.setAttribute(key, newProps[key]);\n        }\n    }\n}\nexport {\n    patch\n}","import { patch } from './vdom/patch';\n\nfunction mountComponent(vm) {\n    vm._update(vm._render());\n}\n\nfunction lifecycleMixin(Vue) {\n    Vue.prototype._update = function(vNode) {\n        const vm = this;\n        patch(vm.$el, vNode);\n    }\n}\n\nexport {\n    mountComponent,\n    lifecycleMixin\n}","import { initState } from './state';\nimport {compileToRenderFunction} from '../compiler';\nimport { mountComponent} from '../compiler/lifecycle'\n\nfunction initMixin(Vue) {\n    Vue.prototype._init = function(options) {\n        const vm = this;\n        vm.$options = options;\n        initState(vm);\n        if (vm.$options.el) {\n            vm.$mount(vm.$options.el);\n        }\n    }\n    Vue.prototype.$mount = function(el) {\n        const vm = this;\n        const options = vm.$options;\n        el = document.querySelector(el);\n        vm.$el = el;\n        if (!options.render) {\n            let template = options.template;\n            if (!template && el) {\n                template = el.outerHTML;\n            }\n            const render = compileToRenderFunction(template)\n            options.render = render;\n        }\n        mountComponent(vm);\n    }\n}\n\nexport {\n    initMixin \n}","function createElement(tags, attrs, ...children) {\n    return vnode(tags,attrs,children);\n}\n\nfunction createTextVnode(text) {\n    return vnode(undefined,undefined,undefined, text);\n}\n\nfunction vnode(tag, props, children, text) {\n    return {\n        tag,\n        props,\n        children,\n        text\n    }\n}   \n\nexport {\n    createElement,\n    createTextVnode\n}\n","import {createElement, createTextVnode} from './vnode'\n\nfunction renderMixin(Vue) {\n    Vue.prototype._c = function() {\n        return createElement(...arguments);\n    }\n    Vue.prototype._s = function(value) {\n        if (!value) return;\n        return typeof value === 'object' ? JSON.stringify(value) : value;\n    }\n    Vue.prototype._v = function(text) {\n        return createTextVnode(text);\n    }\n    \n    Vue.prototype._render = function () {\n        const vm = this;\n        const render = vm.$options.render;\n        const vNode = render.call(vm);\n        console.log(vNode)\n        return vNode;\n    }\n}\n\nexport {\n    renderMixin\n}","\nimport { initMixin } from './instance/init';\nimport {lifecycleMixin} from './compiler/lifecycle'\nimport {renderMixin} from './compiler/vDom'\nfunction Vue(options) {\n    this._init(options)\n}\ninitMixin(Vue);\nlifecycleMixin(Vue);\nrenderMixin(Vue);\n\nexport default Vue;\n\n\n"],"names":["proxyData","vm","target","key","Object","defineProperty","get","set","newVal","defineReactiveData","data","value","observe","newValue","observeArr","array","i","length","ARR_METHODS","originArrMethods","Array","prototype","arrMethods","create","map","m","args","slice","call","arguments","rt","apply","newArr","Observer","isArray","__proto__","walk","keys","initState","options","$options","initData","_data","attribute","unicodeRegExp","ncname","source","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","parseHtmlToAst","html","root","currentParent","stack","text","textEnd","indexOf","startTagMatch","parseStartTag","start","tagName","attrs","endTagMatch","match","advance","end","substring","chars","attr","push","name","n","element","createASTElement","pop","parent","children","trim","type","tag","defaultTagRE","formatProps","attrStr","styleAttrs","split","styleAttr","JSON","stringify","getChildren","el","c","generateChild","join","node","generate","index","lastIndex","textArr","exec","code","undefined","compileToRenderFunction","ast","render","Function","patch","oldNode","vNode","createElement","parentElement","parentNode","insertBefore","nextSibling","removeChild","vnode","props","document","updateProps","child","appendChild","createTextNode","newProps","sKey","style","className","setAttribute","mountComponent","_update","_render","lifecycleMixin","Vue","$el","initMixin","_init","$mount","querySelector","template","outerHTML","tags","createTextVnode","renderMixin","_c","_s","_v","console","log"],"mappings":"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"}